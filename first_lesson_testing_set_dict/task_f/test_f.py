import pytest
from io import StringIO
import sys
from test_file import main


@pytest.mark.parametrize('input_data, answer', [
    # –ü—Ä–∏–º–µ—Ä –∏–∑ —É—Å–ª–æ–≤–∏—è
    ('4 3\n+-+\n??-\n?-?\n++?', '5'),
    ('6 10\n??+++-?-?-\n-??+???--+\n?-+?+-?+--\n??????--?+\n++--?--+-?\n?-?+++?+-?', '12'),

    # 1Ô∏è‚É£ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π
    # –û–¥–Ω–∞ —è—á–µ–π–∫–∞ '?': –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å '+'
    # —Å—Ç—Ä–æ–∫–∞ = +1, —Å—Ç–æ–ª–±–µ—Ü = +1 ‚Üí —Ä–∞–∑–Ω–æ—Å—Ç—å = 0 (–Ω–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞)
    ("1 1\n?", "0"),

    # 2Ô∏è‚É£ –¢–∞–±–ª–∏—Ü–∞ –±–µ–∑ '?'
    # —Å—Ç—Ä–æ–∫–∏: [+1, -1], —Å—Ç–æ–ª–±—Ü—ã: [+0, 0]
    # max —Å—Ç—Ä–æ–∫–∞ = +1, min —Å—Ç–æ–ª–±–µ—Ü = -2 ‚Üí 1 - (-2) = 3
    ("2 2\n+-\n-+", "0"),

    # 3Ô∏è‚É£ –í—Å–µ '?'
    # n=2, m=3 ‚Üí –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–æ–∫—É +3, —Å—Ç–æ–ª–±–µ—Ü -2 (–º–∏–Ω–∏–º—É–º)
    # —Ä–∞–∑–Ω–æ—Å—Ç—å = 3 - (-2) = 5
    ("2 3\n???\n???", "3"),

    # 4Ô∏è‚É£ –°–º–µ—à–∞–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
    # –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å '?' –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
    ("3 3\n+-?\n?--\n+?+", "4"),

    # 5Ô∏è‚É£ –í—Å–µ '+'
    # —Å—Ç—Ä–æ–∫–∞ = +m, —Å—Ç–æ–ª–±–µ—Ü = +n ‚Üí —Ä–∞–∑–Ω–æ—Å—Ç—å = m - n
    ("2 4\n++++\n++++", "2"),

    # 6Ô∏è‚É£ –í—Å–µ '-'
    # —Å—Ç—Ä–æ–∫–∞ = -m, —Å—Ç–æ–ª–±–µ—Ü = -n ‚Üí —Ä–∞–∑–Ω–æ—Å—Ç—å = (-m) - (-n) = n - m = 3 - 2 = 1
    ("3 2\n--\n--\n--", "1"),

    # 7Ô∏è‚É£ –û–¥–∏–Ω —Ä—è–¥ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö
    # –í –ø–µ—Ä–≤–æ–º —Ä—è–¥—É –º–æ–∂–Ω–æ –≤—Å–µ —Å–¥–µ–ª–∞—Ç—å '+', –∞ –¥—Ä—É–≥–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ
    ("3 3\n???\n---\n---", "4"),

    # 8Ô∏è‚É£ –ë–æ–ª—å—à–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
    ("4 4\n?+?+\n-?+-\n?--?\n+??-", "6"),

    # 9Ô∏è‚É£ –ù–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–æ–ª–±—Ü—ã
    ("3 4\n+-??\n?+-+\n-??-", "5"),

    # üîü –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –≤—Å–µ '?'
    ("1 5\n?????", "4"),  # —Å—Ç—Ä–æ–∫–∞ = +5, —Å—Ç–æ–ª–±–µ—Ü = +1 ‚Üí 5 - 1 = 4

    # 11Ô∏è‚É£ –û–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü
    ("5 1\n?\n?\n?\n?\n?", "4"),
    # —Å—Ç—Ä–æ–∫–∞ = +1, —Å—Ç–æ–ª–±–µ—Ü = -5 ‚Üí 1 - (-5) = 6?
    #–Ω–µ—Ç, –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ '?' ‚Üí –≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã ‚Üí –º–∞–∫—Å–∏–º—É–º 4
    
])
def test_h(input_data, answer):
    sys.stdin = StringIO(input_data)
    
    result = main()
    assert result == answer